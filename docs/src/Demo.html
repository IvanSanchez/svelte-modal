<label>
  Center modal
  <input type="checkbox" bind:checked="center"/>
</label>
<label>
  Transition duration in ms (0 to disable transition)
  <input type="number" bind:value="transitionDuration"/>
</label>

<button on:click="set({ shouldShowModal: true, modalResult: '' })">Open Component Modal</button>
<button on:click="openApiModal()">Open API Modal</button>

<p><strong>Modal result:</strong> {{ modalResult || '' }}</p>

{{#if shouldShowModal}}
  <ModalComponent
    ref:modal
    bind:opening
    bind:hiding
    on:result="set({ modalResult: event })"
    on:hidden="set({ shouldShowModal: false })"
    :center
    :transitionDuration
  >
    <ModalContent
      ref:modalContent
      on:modal.dismiss="refs.modal.dismiss(event)"
      on:modal.close="refs.modal.close(event)"
    />
  </ModalComponent>

  <p>
    <strong>Modal state:</strong>
    { opening: {{ opening }}, hiding: {{ hiding }} }
  </p>
{{/if}}

<script>
import ModalComponent from '../../src/Modal.html'
import ModalContent from './ModalContent.html'
import Modal from '../../src/Modal'

export default {
  data () {
    return Object.assign({}, ModalComponent.DEFAULTS, {
      shouldShowModal: false,
      modalResult: 'None thus far.',
      showModalResult: false
    })
  },

  methods: {
    openApiModal () {
      const modal = Modal({
        content: (slot, modal) => {
          const modalContent = new ModalContent({ target: slot })
          modalContent.on('modal.dismiss', modal.dismiss)
          modalContent.on('modal.close', modal.close)
          modal.on('result', result => this.set({ modalResult: result || '' }))
        },
        center: this.get('center'),
        transitionDuration: this.get('transitionDuration')
      })
      this.set({ modalResult: '' })
      modal.open()
    }
  },

  components: { ModalComponent, ModalContent }
}
</script>

<style>
label {
  display: block;
  margin: 30px 0;
}
</style>
