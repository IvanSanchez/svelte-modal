<label>
  Center modal
  <input type="checkbox" bind:checked="center"/>
</label>
<button on:click="refs.modal.open()">Open Component Modal</button>
<button on:click="openApiModal()">Open API Modal</button>

<ModalComponent ref:modal center="{{ center }}">
  <ModalContent ref:modalContent/>
</ModalComponent>

<script>
import ModalComponent from '../../src/Modal.html'
import ModalContent from './ModalContent.html'
import Modal from '../../src/Modal'

export default {
  data () {
    return {
      center: false
    }
  },

  oncreate () {
    const { modal, modalContent } = this.refs

    modal.on('closed', result => console.log('closed', result))
    modal.on('dismissed', result => console.log('dismissed', result))

    modalContent.on('dismiss', result => modal.dismiss(result))
    modalContent.on('close', result => modal.close(result))
  },

  methods: {
    openApiModal () {
      // TODO: figure out a way to make something like this work
      const modal = Modal({
        content: new ModalContent(),
        center: this.get('center')
      })
      const makeListener = name =>
        result => {
          console.log(result)
          modal.destroy()
        }
      modal.on('closed', makeListener('closed'))
      modal.on('dismissed', makeListener('dismissed'))
      modal.open()
    }
  },

  components: {
    ModalComponent,
    ModalContent
  }
}
</script>

<style>
label {
  display: block;
  margin: 30px 0;
}
</style>
